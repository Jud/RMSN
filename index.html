<!DOCTYPE html>
<html lang="en">
<head>
<title>RMSN - Reading Message Server</title>
<style type="text/css">
  body {
    font-family:'Helvetica Neue', helvetica, arial, sans-serif;
    padding: 30px 60px;
  }
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script src="/nowjs/now.js"></script>
<script src="/rmsn.js"></script>
<script>
now.ready(function(){

  now.receiveMessage = function(event_name, message){
    $('#events').append("<br>" + event_name + ": " + message);
  }

  $("#send-button").click(function(){
    $.post('/apps/1234/channels/greg/events', {
      event_name: $('#event_name').val(),
      message: $('#message').val()
    });
    $(':text').val('');
  });


  // Pusher code
  var config = {
        key:'fjdklafsdjklv',
        channels:['greg','pieratt','max']
      },
      pusher = new Pusher(config.key),
      channel;

  for(i = 0; i < config.channels.length; i++){
    channel = pusher.subscribe(config.channels[i]);
    //channel.bind('new_obj', new_obj);
    //channel.bind('update_obj', update_obj);
  }

});
</script>
</head>
<body>
  <h1>RMSN</h1>
  <h2><a href="https://github.com/leppert/RMSN">Reading Message Server</a> Test Page</h2>
  <form>
    <input type="text" id="event_name" placeholder='event_name'>
    <input type="text" id="message" placeholder='message'>
    <input type="button" value="Send" id="send-button">
  </form>
  <div id="events"></div>
</body>
</html>
